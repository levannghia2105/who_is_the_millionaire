if (self.CavalryLogger) { CavalryLogger.start_js(["C33t+tH"]); }

__d("CometFeedStoryFollowButtonStrategy_followButton$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c=[{alias:null,args:null,kind:"ScalarField",name:"subscribe_status",storageKey:null}];return{kind:"SplitOperation",metadata:{},name:"CometFeedStoryFollowButtonStrategy_followButton$normalization",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[b,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_use_blue_link",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"profile",plural:!1,selections:[b,a,{kind:"InlineFragment",selections:c,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:c,type:"User",abstractKey:null}],storageKey:null}],type:"FollowProfileActionLink",abstractKey:null}],storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[b,{alias:null,args:null,kind:"ScalarField",name:"is_prod_eligible",storageKey:null}],type:"ICometStorySection",abstractKey:"__isICometStorySection"}]}}();e.exports=a}),null);
__d("CometFeedStoryFollowButtonStrategy_followButton.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"subscribe_status",storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedStoryFollowButtonStrategy_followButton",selections:[{args:null,kind:"FragmentSpread",name:"useCometFeedStoryMatchDebugger_iCometStorySection"},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_use_blue_link",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"profile",plural:!1,selections:[{kind:"InlineFragment",selections:b,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:b,type:"User",abstractKey:null}],storageKey:null}],type:"FollowProfileActionLink",abstractKey:null}],storageKey:null}],storageKey:null}],type:"CometFeedStoryFollowButtonStrategy",abstractKey:null}}();e.exports=a}),null);
__d("StoryHeaderFollowProfileFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1811514");c=b("FalcoLoggerInternal").create("story_header_follow_profile",a);e.exports=c}),null);
__d("CometFeedStoryFollowButtonStrategy.react",["fbt","CometFeedStoryFollowButtonStrategy_followButton.graphql","CometLink.react","CometMiddot.react","CometRelay","StoryHeaderFollowProfileFalcoEvent","TetraText.react","react","useCometFeedStoryMatchDebugger","useCometPFTFFollow","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react"),k="IFR_POST_IN_NEWS_FEED";function a(a){var e;a=d("CometRelay").useFragment(i!==void 0?i:i=b("CometFeedStoryFollowButtonStrategy_followButton.graphql"),a.followButton);c("useCometFeedStoryMatchDebugger")(a);e=(e=a.story)==null?void 0:e.action_links;e=e==null?void 0:e.find(function(a){return a.should_use_blue_link!==!1});var f=(a=a.story)==null?void 0:a.id,g=(e==null?void 0:e.profile)==null||((a=e.profile)==null?void 0:a.id)==null?null:e.profile.id,l=(e==null?void 0:e.profile)==null||((a=e.profile)==null?void 0:a.subscribe_status)==null?null:(a=e.profile)==null?void 0:a.subscribe_status;a=e!=null&&((a=e.profile)==null?void 0:a.__typename)==="User";a=c("useCometPFTFFollow")(g,l,k,a);var m=a[0],n=a[1];a=function(){g!=null&&f!=null&&c("StoryHeaderFollowProfileFalcoEvent").log(function(){return{event:"IMPRESSION",profile_id:g,story_id:f}})};a=c("useVisibilityObserver")({onVisible:a()});if(e==null||f==null)return j.jsx("span",{});e=m?j.jsx(c("TetraText.react"),{color:"secondary",type:"bodyLink3",children:h._("Following")}):j.jsx(c("TetraText.react"),{color:"blueLink",type:"bodyLink3",children:h._("Follow")});var o=function(){if(g==null||l==null)return function(){};m?c("StoryHeaderFollowProfileFalcoEvent").log(function(){return{event:"UNFOLLOW",profile_id:g,story_id:f}}):c("StoryHeaderFollowProfileFalcoEvent").log(function(){return{event:"FOLLOW",profile_id:g,story_id:f}})},p=function(){o(),n()};return j.jsxs("span",{children:[j.jsx(c("CometMiddot.react"),{className:"b1v8xokw oo9gr5id"}),j.jsx(c("CometLink.react"),{color:"highlight",onClick:function(){p()},ref:a,children:e})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);